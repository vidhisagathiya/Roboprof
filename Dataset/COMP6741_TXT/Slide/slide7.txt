René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.1Lecture 7Intelligent AgentsCOMP 474/6741, Winter 2024René WitteDepartment of Computer Scienceand Software EngineeringConcordia UniversityRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.2Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based Bots5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.3https://www.forbes.com/sites/marisagarcia/2024/02/19/what-air-canada-lost-in-remarkable-lying-ai-chatbot-case/?sh=57e7bfe9696fhttps://www.forbes.com/sites/marisagarcia/2024/02/19/what-air-canada-lost-in-remarkable-lying-ai-chatbot-case/?sh=57e7bfe9696fhttps://www.forbes.com/sites/marisagarcia/2024/02/19/what-air-canada-lost-in-remarkable-lying-ai-chatbot-case/?sh=57e7bfe9696fRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.4Intelligent Conversational Agentsa.k.a. Dialog System or Dialog Engine• A software program that can interpret andrespond to statements made by users in anatural language• Different types of chatbots• Generic vs. Goal-oriented• Retrieval vs. Generative (Deep Learning)• Similar architecture, different stacksRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.5Apple’s “Knowledge Navigator” Vision (1987)https://www.youtube.com/watch?v=umJsITGzXd0https://www.youtube.com/watch?v=umJsITGzXd0René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.6Siri (2009)https://tomgruber.org/writing/semtech09.htmhttps://tomgruber.org/writing/semtech09.htmRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.7Siri Presentationhttps://vimeo.com/5424527https://vimeo.com/5424527René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.8The Chatbots Landscape (2017)René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.9Chatbot ApproachesModern approachesPattern matching: Regex matching and response templates (canned responses)Grounding: Knowledge graphs and inference on those graphsSearch: Text retrievalGenerative: Statistics and machine learningHybrid approachesUsing multiple (or all four) techniques in one botRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.10Chatbot ApplicationsExamplesQuestion answering: Google Search, Alexa, Siri, WatsonVirtual assistants: Google Assistant, Alexa, Siri, MS paperclipConversational: Google Assistant, Google Smart Reply, Mitsuki BotMarketing: Twitter bots, blogger bots, Facebook bots, Google Search, GoogleAssistant, Alexa, AlloCustomer service: Storefront bots, technical support botsCommunity management: Bonusly, SlackbotTherapy: Woebot, Wysa, YourDost, Siri, AlloRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.12Chatbot techniques used for some example applicationsCopyright 2019 by Manning Publications Co., [LHH19]René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.13Chatbot recirculating (recurrent) pipelineCopyright 2019 by Manning Publications Co., [LHH19]René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.14Marketing ChatbotsBots promoting movies, TV shows, video games, . . .• HBO promoted “Westworld” with “Aeden”• Sony promoted “Resident Evil” with “Red Queen”• Disney promoted “Zootopia” with “Officer Judy Hopps”• Universal promoted “Unfriended” with “Laura Barnes”• Activision promoted “Call of Duty” with “Lt. Reyes”https://venturebeat.com/2016/05/03/call-of-duty-infinite-warfares-first-victory-6m-bot-messages-on-facebook/https://venturebeat.com/2016/05/03/call-of-duty-infinite-warfares-first-victory-6m-bot-messages-on-facebook/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.15Leena.aiHR chatbot answering employees questionshttps://techcrunch.com/2018/06/29/leena-ai-builds-hr-chat-bots-to-answer-policy-questions-automatically/https://techcrunch.com/2018/06/29/leena-ai-builds-hr-chat-bots-to-answer-policy-questions-automatically/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.16Leena.ai Use Casehttps://www.youtube.com/watch?v=aiuDC2OSIYEhttps://www.youtube.com/watch?v=aiuDC2OSIYERené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.17https://inc42.com/buzz/y-combinator-graduate-hrtech-startup-leena-ai-raises-2-mn-seed-fund/https://inc42.com/buzz/y-combinator-graduate-hrtech-startup-leena-ai-raises-2-mn-seed-fund/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.18https://www.theguardian.com/technology/2016/jun/28/chatbot-ai-lawyer-donotpay-parking-tickets-london-new-yorkhttps://www.theguardian.com/technology/2016/jun/28/chatbot-ai-lawyer-donotpay-parking-tickets-london-new-yorkRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.19Perceived Business Benefits• “Top 5 Emerging Technologies in 2018”(Gartner)• Global Market to reach $1-3B by 2025,CAGR of 25-40%• Huge benefits across the value chain:• Sales & Marketing• HR & Operations• Service & Payment• Retention & GrowthRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.20https://techcrunch.com/2021/03/10/heyday-seed-funding-2/https://techcrunch.com/2021/03/10/heyday-seed-funding-2/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.21Edubotshttps://www.edubots.euhttps://www.edubots.euRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.22Bot Design ProcessUser Stories• Develop pairs of user questions – expected answers• Generalize multiple stories with the same themeDevelopment• Identify appropriate technology for specific type of question• Enhance bot based on approach (e.g., add data for retrieval)→ Worksheet #6: Task 1René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.23Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based Bots5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.24Basic approachInformation Retrieval-based ApproachGiven a corpus of previously answered questions• Create tf-idf vector of the question• Compute cosine similarity with either:• tf-idf vectors of answers (if only answers available)• tf-idf vectors of questions (if question/answer pairs available)Example Dataset1.4 million answered questions from Amazon:https://jmcauley.ucsd.edu/data/amazon/qa/https://jmcauley.ucsd.edu/data/amazon/qa/QnA Maker (Microsoft)“Low code” approachhttps://www.qnamaker.ai/https://www.qnamaker.ai/Microsoft Azure Cognitive Services for Languagehttps://language.cognitive.azure.com/https://language.cognitive.azure.com/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.27Examplehttps://docs.microsoft.com/en-us/azure/cognitive-services/QnAMaker/quickstarts/create-publish-knowledge-base?tabs=v1https://docs.microsoft.com/en-us/azure/cognitive-services/QnAMaker/quickstarts/create-publish-knowledge-base?tabs=v1René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.28Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based Bots5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.29Eliza ExampleEliza + DOCTOR scriptIf the input sentence is:I am very unhappy these days.Eliza’s response will be:How long have you been very unhappy these days?ProcessingKeyword:I amDecomposition pattern:I am <whatever>Reassembly Pattern:How long have you been <whatever>?René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.30Pattern-response matching"(.*)?do you remember (.*)?": ["Did you think I would forget $2?","Why do you think I should recall $2 now?","What about $2?","You mentioned $2",],"(.*)?my mother (.*)?": ["Who else in your family $2?","Tell me more about your family",],"(.*)?why don’t you (.*)?": ["Should you $2 yourself?","Do you believe I don’t $2?","Perhaps I will $2 in good time",],René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.31Regular ExpressionsFinite State MachineA.k.a deterministic finite automaton (DFA).Copyright by Dnu72 (https://commons.wikimedia.org/wiki/File:Automata_theory.svg), “Automata theory”, licensed under https://creativecommons.org/licenses/by- sa/3.0/legalcodehttps://commons.wikimedia.org/wiki/File:Automata_theory.svghttps://creativecommons.org/licenses/by-sa/3.0/legalcodeRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.32Regular ExpressionsBasic Concepts (https://en.wikipedia.org/wiki/Regular_expression)Boolean "or": A vertical bar separates alternatives. For example, gray|grey can match“gray” or “grey”.Grouping: Parentheses are used to define the scope and precedence of the operators(among other uses). For example, gray|grey and gr(a|e)y are equivalentpatterns which both describe the set of "gray" or "grey".Quantification: A quantifier after a token (such as a character) or group specifies how oftenthat a preceding element is allowed to occur:• ? The question mark indicates zero or one occurrences of the precedingelement. For example, colou?r matches both "color" and "colour".• * The asterisk indicates zero or more occurrences of the precedingelement. For example, ab*c matches "ac", "abc", "abbc", "abbbc", andso on.• + The plus sign indicates one or more occurrences of the precedingelement. For example, ab+c matches "abc", "abbc", "abbbc", and so on,but not "ac".• {n} The preceding item is matched exactly n times.• {min,} The preceding item is matched min or more times.• {min,max} The preceding item is matched at least min times, but notmore than max times.→ Worksheet #6: Task 2https://en.wikipedia.org/wiki/Regular_expression)René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.33Artificial Intelligence Markup Language (AIML)Towards Chatbot Frameworks• Open standard, started in 1995 by Richard Wallace et al.• Used in the A.L.I.C.E. chatbot (and many others)• Using XML-based patterns• AIML kernel loads patterns and responds when match is foundExample<category><pattern>HELLO *</pattern><template>Hi, human!</template></category><category><pattern>WHAT IS YOUR NAME</pattern><template>I am ConUBot, your helpful assistant.</template></category>René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.34AIML Examples (v2.0)<?xml version="1.0" encoding="UTF-8"?><aiml version="2.0"><category><pattern>HI</pattern><template>Hi!</template></category><category><pattern>[HELLO HI YO YOH YO’][ROSA ROSE CHATTY CHATBOT BOT CHATTERBOT]</pattern><template>Hi , How are you?</template></category><category><pattern>[HELLO HI YO YOH YO’ ’SUP SUP OK HEY][HAL YOU U YALL Y’ALL YOUS YOUSE]</pattern><template>Good one.</template></category></aiml>(from [LHH19, Chapter 12])René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.35Python & AIMLPython Implementations• E.g., PyAiml, aiml, aiml_bot• Support AIML 1.0 only :(<?xml version="1.0" encoding="UTF-8"?><aiml version="1.0.1"><category><pattern>HELLO *</pattern><template>Hi Human!</template></category><category><pattern>HELLO TROLL</pattern><template>Good one, human.</template></category></aiml>Using aiml_botimport aiml_botbot = aiml_bot.Bot(learn="conubot.aiml")In : bot.respond("Hello Conubot!!!")Out: ’Hi Human!’See https://pypi.org/project/AIML-Bot/https://pypi.org/project/AIML-Bot/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.36Random answers<?xml version="1.0" encoding="UTF-8"?><aiml version="1.0.1"><category><pattern>HELLO *</pattern><template><random><li>Hi Human!</li><li>Hi there!</li><li>Hello!</li></random></template></category><category><pattern>HELLO TROLL</pattern><template><random><li>Good one, human.</li><li>Clever!</li></random></template></category></aiml>René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.37Sessions and Predicates<aiml version="1.0.1" encoding="UTF-8"><category><pattern>MY DOGS NAME IS *</pattern><template>That is interesting that you have a dognamed <set name="dog"><star/></set></template></category><category><pattern>WHAT IS MY DOGS NAME</pattern><template>Your dog’s name is <get name="dog"/>.</template></category></aiml>ExampleMy dogs name is MaxThat is interesting that you have a dog named Max...What is my dogs name?Your dog’s name is Max.https://www.devdungeon.com/content/ai-chat-bot-python-aiml#sessionshttps://www.devdungeon.com/content/ai-chat-bot-python-aiml#sessionsRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.38AIML 2.0 Extensions: Rich media, hyperlinks, ...<card><image>www.png</image><title>Italian Greyhound</title><subtitle>A very good dog</subtitle><button><text>AIML How-To</text><postback>HOW TO</postback></button><button><text>Back To Tour</text><postback>RESUME TOUR</postback></button></card>http://www.aiml.foundation/doc.htmlhttp://www.aiml.foundation/doc.htmlRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.39Pandorabots (https://pandorabots.com)Cloud-based platform for AIML 2.0 botshttps://pandorabots.comRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.40Other bot languagesAPI.aiProprietary, intuitive language for dialog specifications• Dialogue history, location and user preferences• Developed by startup Speaktoit, released as api.ai in 2014DialogflowAPI.ai was bought by Google in 2016 and renamed in 2017 to Dialogflow• Powers Google Assistant and other servicesapi.aiRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.41https://aws.amazon.com/lex/https://aws.amazon.com/lex/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.42Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the Knowledge BaseLinking Documents and Knowledge Graphs5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.43GroundingAdding Knowledge• Using a knowledge base when creating answers• More scalable than hard-coding every possible answer in patternsFrom the lab exercises...1 What is <X>?E.g., “What is Concordia University?”2 ⇒ query DBpedia to retrieve the rdfs:comment (in the user’s language) of XConcordia University (commonly referred to as Concordia) is a public com-prehensive university located in Montreal, Quebec, Canada. Founded in1974 following the merger of Loyola College and Sir George Williams Uni-versity, Concordia is one of the three universities in Quebec where Englishis the primary language of instruction.René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.44Question-answering WorkflowCopyright 2013 by Manning Publications Co., [IMF13]René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.45Question TypesClassifying QuestionsDifferent types of questions require different SPARQL query structures (ASK,SELECT, using COUNT, etc.)Copyright 2013 by Manning Publications Co., [IMF13]René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.46Question Types (contd.)Copyright 2013 by Manning Publications Co., [IMF13]René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.47Question ClassificationApplying ML• What we need is a classifier that takes a question as input and returns the typeas output• This is a typical machine learning problem (supervised learning)René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.48Feature ExtractionFeature EngineeringNeed to convert text (here: question) into a feature vector• Could use count or tf-idf vector• but this results in a high number of dimensions (and possible overfitting)Idea: Reduce DimensionsCan we come up with some other features that can be easily extracted?• Length (in words/characters)?• Number of words with capital letters?• Ends with question mark or not?• Number of nouns/verbs?Challenge: find features that facilitate classification.→ Worksheet #6: Tasks 3 & 4René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.49Dimensionality reduction in NLPSome common strategiesStemming: reduce words to their stem (e.g., students, student⇒ student)Stopword removal: remove stop-words (e.g., the, in, an, a, ...)René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.50Example NLP PipelineCopyright 2019 by Manning Publications Co., [LHH19]René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.51TokenizationTask• Split input stream of characters into individual tokens (words, numbers, etc.)• Done by a Tokenizer (e.g., the default tokenizer in scikit-learn)Tokenization can be difficult...For example, biomedical documents with complex expressions, chemical formulas,etc.:• 1,4-β-xylanase II from Trichoderma reesei• When N-formyl-L-methionyl-L-leucyl-L-phenylalanine (fMLP) was injected. . .• Technetium-99m-CDO-MeB [Bis[1,2-cyclohexanedione-dioximato(1-)-O]-[1,2-cyclohexanedione dioximato(2-)-O]methyl-borato(2-)-N,N′,N′′,N′′′,N′′′′,N′′′′′)-chlorotechnetium) belongs to a familyof compounds. . .René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.52Part-of-Speech (POS) Tagging and ParsingPOS TaggingAssign a POS tag (e.g., Noun, Verb, Adjective, Adverb, ...) to each Token:The/DT big/ADJ dog/NNCan be done reliably, available in NLP libraries (e.g, spaCy or NLTK for Python).ParsingCreate a tree representing a sentence’s grammatical structureYou can then extract subject or object, e.g., to use in a SPARQL query.→ Worksheet #6: Task 5René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.53Generating SPARQL Queries (I)Steinmetz N, Arning AK, Sattler KU. From natural language questions to SPARQL queries: apattern-based approach. BTW 2019. https://dl.gi.de/handle/20.500.12116/21702https://dl.gi.de/handle/20.500.12116/21702René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.54Generating SPARQL Queries (II)Steinmetz N, Arning AK, Sattler KU. From natural language questions to SPARQL queries: apattern-based approach. BTW 2019. https://dl.gi.de/handle/20.500.12116/21702→ Worksheet #6: Task 6https://dl.gi.de/handle/20.500.12116/21702René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.55Generating SPARQL Queries: EvaluationRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.56The Stanford Question Answering Dataset (SQuAD)https://rajpurkar.github.io/SQuAD-explorer/→ Worksheet #6: Task 7https://rajpurkar.github.io/SQuAD-explorer/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.57Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the Knowledge BaseLinking Documents and Knowledge Graphs5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.58Competency QuestionsKnowledge Base DesignUnlike (relational) databases, knowledge bases do not have a rigid, pre-defineddesign for a specific application• Encourage inter-connection of knowledge• Still helpful to have an idea of possible use casesDesign Method• Start with a set of questions to guide the design of the vocabulary and datatriples• It must be possible to answer the questions when the knowledge base hasbeen constructed• These competency questions can be seen as a requirements specification for avocabulary or knowledge baseRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.59Competency Questions: ExamplesExamplesSome possible competency questions for a university knowledge graph:Q1: Which courses are offered at University X?Q2: Which topics are covered by a course C?Q3: Which professors teach at university X?Q4: What are the prerequisites for a given course C?Q5: Which universities offer courses that cover topic T ?NoteThese mostly follow a single patternWhich [CLASS1] [PROPERTY] [CLASS2]?René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.60Competency Question: PatternsTowards Competency Question-Driven Ontology Authoring, https://link.springer.com/chapter/10.1007/978- 3- 319- 07443- 6_50CQ Archetypes (PA = Predicate Arity, RT = Relation Type, M = Modifier, DE = Domain-independent Element; obj. =object property relation, data. = datatype property relation, num. = numeric modifier, quan. = quantitative modifier, tem.= temporal element, spa. = spatial element; CE = class expression, OPE = object property expression, DP = datatypeproperty, I = individual, NM = numeric modifier, PE = property expression, QM = quantity modifier)https://link.springer.com/chapter/10.1007/978-3-319-07443-6_50René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.61Testing Competency QuestionsExample: African Wildlife Ontology (AWO)Competency question awo_6 “Which plants eat animals?”Verify using a SPARQL query:SELECT DISTINCT ?eatsWHERE {?eats rdfs:subClassOf awo:plant, [a owl:Restriction ;owl:onProperty awo:eats;owl:someValuesFrom awo:animal] .FILTER(?eats != owl:Nothing)}See https://www.researchgate.net/publication/338424817_Dataset_of_ontology_competency_questions_to_SPARQL-OWL_queries_translationsAnother approach: SHACLThere is also a separate standard, the Shapes Constraint Language (SHACL)(https://www.w3.org/TR/shacl/), see [HHDF20] for an example.→ Worksheet #6: Task 8https://www.researchgate.net/publication/338424817_Dataset_of_ontology_competency_questions_to_SPARQL-OWL_queries_translationshttps://www.researchgate.net/publication/338424817_Dataset_of_ontology_competency_questions_to_SPARQL-OWL_queries_translationshttps://www.w3.org/TR/shacl/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.62Generic SPARQL Query GeneratorUnger C, Bühmann L, Lehmann J, Ngonga Ngomo AC, Gerber D, Cimiano P. Template-based questionanswering over RDF data. In Proceedings of the 21st international conference on World Wide Web 2012Apr 16 (pp. 639-648).René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.63Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the Knowledge BaseLinking Documents and Knowledge Graphs5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.64Knowledge Management Architecture 3.0Knowledge BaseKnowledge WorkerLinked Open Data (LOD)NLP PipelineDocumentsRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.65Entity Linkingthe efficient computation of the tree architecture ..."http://dbpedia.org/resource/Tree_(data structure) http://dbpedia.org/resource/Tree"The proposed approach takes advantage of bothRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.66René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.68PermID Linked Data Graph→ Worksheet #6: Task 9René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.70DBpedia Spotlighthttps://www.dbpedia-spotlight.org/https://www.dbpedia-spotlight.org/René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.71DBpedia Spotlight: Disambiguation→ Worksheet #6: Task 10René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.72DBpedia Spotlight: DisambiguationApproachSpotlight uses a statistical model for disambiguation• Using the context of a word/phrase• Learned from the Wikipedia pages including the links (for multiple languages)A 2012 paper reports a 85.1% accuracy for English (with 7.4% missing links)Discussion• Modern approaches for disambiguation use word embeddings (discussed laterin the course), with better performance• However, Spotlight is a stable, easy-to-install tool and useful for firstexperimentsImproving Efficiency and Accuracy in Multilingual Entity Extraction,https://doi.org/10.1145/2506182.2506198https://doi.org/10.1145/2506182.2506198René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.73Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based Bots5 ConclusionsExample: WatsonSummary6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.74IBM WatsonWatson is a type of question-answering (QA) system, first developed 2006–20112011 Jeopardy! competition: 2,880 POWER7 threads and 16 terabytes of RAMRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.75IBM Watson: The Science Behind an Answer (2011)https://www.youtube.com/watch?v=ZbjTtCG3_X0https://www.youtube.com/watch?v=ZbjTtCG3_X0René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.76Summary of Chatbot ApproachesCopyright 2019 by Manning Publications Co., [LHH19]→ Worksheet #6: Task 11René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.77Outline1 Introduction2 Search-Based Bots3 Pattern-Matching Bots4 Grounding-Based Bots5 Conclusions6 Notes and Further ReadingRené WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.78Reading MaterialRequired• [LHH19, Chapter 12] (Dialog engines)Supplemental• [IMF13, Chapter 8] (Building a QA System)• [RN10, Chapter 26] (Philosophical Foundations)René WitteIntroductionIntelligent ConversationalAgentsExamplesDesign processSearch-Based BotsPattern-Matching BotsGrounding-Based BotsQuestion ClassificationNLP PipelinesDesigning the KnowledgeBaseLinking Documents andKnowledge GraphsConclusionsExample: WatsonSummaryNotes and FurtherReading7.79References[HHDF20] Marvin Hofer, Sebastian Hellmann, Milan Dojchinovski, and JohannesFrey.The New DBpedia Release Cycle: Increasing Agility and Efficiencyin Knowledge Extraction Workflows.In Semantic Systems. In the Era of Knowledge Graphs, pages 1–18,Cham, 2020. Springer International Publishing.https://link.springer.com/chapter/10.1007/978-3-030-59833-4_1.[IMF13] Grant S. Ingersoll, Thomas S. Morton, and Andrew L. Farris.Taming Text: How to find, organise, and manipulate it.Manning, 2013.https://concordiauniversity.on.worldcat.org/oclc/772977853.[LHH19] Hobson Lane, Cole Howard, and Hannes Max Hapke.Natural Language Processing in Action.Manning Publications Co., 2019.https://concordiauniversity.on.worldcat.org/oclc/1102387045.[RN10] Stuart Russell and Peter Norvig.Artificial Intelligence: A Modern Approach.Prentice Hall, 3rd edition, 2010.https://concordiauniversity.on.worldcat.org/oclc/359890490.https://link.springer.com/chapter/10.1007/978-3-030-59833-4_1https://concordiauniversity.on.worldcat.org/oclc/772977853https://concordiauniversity.on.worldcat.org/oclc/1102387045https://concordiauniversity.on.worldcat.org/oclc/359890490	Chatbots	Introduction	Intelligent Conversational Agents	Examples	Design process	Search-Based Bots	Pattern-Matching Bots	Grounding-Based Bots	Question Classification	NLP Pipelines	Designing the Knowledge Base	Linking Documents and Knowledge Graphs	Conclusions	Example: Watson	Summary	Notes and Further Reading